# 整体代码框架

## 1、如何为多个任务分配线程

| 线程         | 功能                               |
| ------------ | ---------------------------------- |
| sem_release  | 解析串口数据并发送相应信号量       |
| uart_storage | 串口数据转存，并将串口数据存入邮箱 |
| Shake        | 舵机控制                           |
| Motor        | 电机及加湿器控制                   |
| AHT10        | 温湿度获取                         |
| Main         | 时间校正及发送                     |

## 2、如何实现线程间的交互（ipc）

| 信号量     | 功能                                     |
| ---------- | ---------------------------------------- |
| rx_sem     | 串口接收中断发送，触发 uart_storage 线程 |
| mode_sem   | 模式切换信号                             |
| plus_sem   | 加档信号                                 |
| reduce_sem | 减档信号                                 |
| shake_sem  | 摇头信号                                 |
| hum_sem    | 加湿信号                                 |

| 邮箱 | 功能                 |
| ---- | -------------------- |
| mbt1 | 传输串口接收到的信息 |
| mbt2 | 传输温度信息         |
| mbt3 | 传输湿度信息         |

## 3、代码整合（源码分析）